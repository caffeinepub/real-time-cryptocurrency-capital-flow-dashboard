{
  "kind": "build_request",
  "title": "Fix confluence filtering to display assets in bubble visualization",
  "projectName": "Crypto Flow Bubbles",
  "priority": "high",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "Investigate and fix the confluence filtering logic in useBubbleAssets hook to ensure assets with convergence data are properly displayed instead of showing 'Nenhum ativo com alta confluência encontrada' message",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-1",
          "msg-2",
          "msg-3",
          "msg-4",
          "msg-5",
          "msg-6",
          "msg-7",
          "msg-8",
          "msg-9",
          "msg-10"
        ],
        "quotes": [
          "Nao ha ativo com alta confluência encontrada...esta dizendo",
          "Sim"
        ]
      },
      "acceptanceCriteria": [
        "Bubble visualization displays assets from Binance market data",
        "No 'Nenhum ativo com alta confluência encontrada' error message when valid assets exist",
        "Assets with any convergence score are visible in the 3D bubble view",
        "Confluence filtering threshold is properly configured or adjusted to show available assets"
      ]
    },
    {
      "id": "REQ-2",
      "text": "Review and adjust the convergence calculation logic in useBubbleAssets to ensure it properly evaluates assets based on available Binance data (price changes, volume, market metrics)",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-2",
          "msg-3"
        ]
      },
      "acceptanceCriteria": [
        "Convergence scores are calculated from real Binance market data",
        "Assets with significant price movement or volume are assigned appropriate convergence values",
        "Filtering logic allows assets to pass through when they meet reasonable convergence thresholds"
      ]
    },
    {
      "id": "REQ-3",
      "text": "Ensure BubbleVisualization component properly renders bubbles when asset data is available, with appropriate error handling for truly empty data states versus filtering issues",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-2",
          "msg-10"
        ]
      },
      "acceptanceCriteria": [
        "Empty state message only appears when genuinely no data is available from Binance",
        "Bubbles render correctly when useBubbleAssets returns valid asset array",
        "Error states distinguish between API failures and filtering logic issues"
      ]
    }
  ],
  "constraints": [
    "Do not modify Internet Identity authentication logic in useInternetIdentity.ts",
    "Do not change the Three.js 3D rendering implementation in FloatingBubble.tsx",
    "Maintain compatibility with existing Binance WebSocket and REST API integration",
    "Preserve the single-actor backend architecture - do not modify main.mo unless data structure changes are required"
  ],
  "nonGoals": [
    "Adding new data sources beyond Binance",
    "Implementing additional confluence indicators not already in the codebase",
    "Changing the visual design or layout of the bubble visualization",
    "Adding user-configurable confluence threshold controls (unless necessary for the fix)"
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}